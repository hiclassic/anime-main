<?php
require __DIR__ . "/../includes/header.php";
ЁЯФ╣ require рж╣рж▓рзЛ PHP ржПрж░ include function ржПрж░ ржоржд, ржХрж┐ржирзНрждрзБ ржлрж╛ржЗрж▓ ржирж╛ ржкрзЗрж▓рзЗ рж╕рзНржХрзНрж░рж┐ржкрзНржЯ ржерзЗржорзЗ ржпрж╛рзЯред
ЁЯФ╕ __DIR__ ржорж╛ржирзЗ рж╣рж▓рзЛ ржмрж░рзНрждржорж╛ржи ржлрж╛ржЗрж▓ ржпрзЗржЗ ржлрзЛрж▓рзНржбрж╛рж░рзЗ ржЖржЫрзЗ, рждрж╛рж░ absolute pathред
ЁЯФ╕ /../includes/header.php ржорж╛ржирзЗ ржПржХ ржзрж╛ржк ржЙржкрж░рзЗрж░ ржлрзЛрж▓рзНржбрж╛рж░рзЗрж░ includes/header.php ржлрж╛ржЗрж▓ рж▓рзЛржб ржХрж░рж╛ред

php
Copy code
require __DIR__ . "/../config/config.php";
ЁЯФ╣ ржПржЗ рж▓рж╛ржЗржи ржжрж┐рзЯрзЗ ржбрзЗржЯрж╛ржмрзЗржЬрзЗрж░ рж╕рж╛ржерзЗ ржХрж╛ржирзЗржХрж╢ржи ржХрж░рж╛рж░ config.php ржлрж╛ржЗрж▓ рж▓рзЛржб ржХрж░рж╛ рж╣рзЯред

php
Copy code
if (isset($_POST['submit'])) {
ЁЯФ╣ ржЪрзЗржХ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ ржпрзЗ ржлрж░рзНржоржЯрж┐ рж╕рж╛ржмржорж┐ржЯ рж╣рзЯрзЗржЫрзЗ ржХрж┐ржирж╛ред
ЁЯФ╕ $_POST['submit'] ржорж╛ржирзЗ HTML form ржПрж░ submit ржмрж╛ржЯржи ржХрзНрж▓рж┐ржХ рж╣рзЯрзЗржЫрзЗ ржХрж┐ржирж╛ред

php
Copy code
    $email = trim($_POST['email'] ?? '');
    $username = trim($_POST['username'] ?? '');
    $password_raw = $_POST['password'] ?? '';
ЁЯФ╣ trim() ржлрж╛ржВрж╢ржи ржжрж┐рзЯрзЗ ржЗржиржкрзБржЯрзЗрж░ ржЖржЧрзЗ-ржкрж░рзЗ ржерж╛ржХрж╛ рж╕рзНржкрзЗрж╕ ржХрзЗржЯрзЗ ржлрзЗрж▓рж╛ рж╣рзЯред
ЁЯФ╕ ?? '' ржорж╛ржирзЗ рж╣рж▓рзЛ ржпржжрж┐ ржЗржиржкрзБржЯ ржирж╛ ржЖрж╕рзЗ рждрж╛рж╣рж▓рзЗ ржбрж┐ржлрж▓рзНржЯ ржлрж╛ржБржХрж╛ рж╕рзНржЯрзНрж░рж┐ржВ рж░рж╛ржЦрзЛред
ЁЯФ╕ $password_raw ржнрзНржпрж╛рж░рж┐рзЯрзЗржмрж▓ржЯрж┐ ржорзВрж▓ ржкрж╛рж╕ржУрзЯрж╛рж░рзНржб ржЗржиржкрзБржЯ ржзрж░рзЗред

php
Copy code
    if (empty($email) || empty($username) || empty($password_raw)) {
        $error = "Please fill in all fields.";
ЁЯФ╣ ржпржжрж┐ ржпрзЗржХрзЛржирзЛ ржлрж┐рж▓рзНржб ржлрж╛ржБржХрж╛ ржерж╛ржХрзЗ, рждрж╛рж╣рж▓рзЗ error message рж╕рзЗржЯ ржХрж░рж╛ рж╣рзЯред

php
Copy code
    } elseif (!filter_var($email, FILTER_VALIDATE_EMAIL)) {
        $error = "Invalid email format.";
ЁЯФ╣ ржПржЗ рж▓рж╛ржЗржирзЗ filter_var() ржлрж╛ржВрж╢ржирзЗрж░ ржорж╛ржзрзНржпржорзЗ ржЗржорзЗржЗрж▓ ржлрж░ржорзНржпрж╛ржЯ ржарж┐ржХ ржЖржЫрзЗ ржХрж┐ржирж╛ ржЪрзЗржХ ржХрж░рж╛ рж╣рзЯред
ЁЯФ╕ ржпржжрж┐ ржнрзБрж▓ ржлрж░ржорзНржпрж╛ржЯ рж╣рзЯ, error рж╕рзЗржЯ рж╣рзЯред

php
Copy code
    } else {
        try {
ЁЯФ╣ ржпржжрж┐ рж╕ржм ржарж┐ржХржарж╛ржХ рж╣рзЯ, рждрж╛рж╣рж▓рзЗ ржбрзЗржЯрж╛ржмрзЗржЬрзЗ ржбрзЗржЯрж╛ ржЗржирж╕рж╛рж░рзНржЯ ржХрж░рж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ (try) ржХрж░рж╛ рж╣рзЯред

php
Copy code
            $password_hashed = password_hash($password_raw, PASSWORD_DEFAULT);
ЁЯФ╣ ржорзВрж▓ ржкрж╛рж╕ржУрзЯрж╛рж░рзНржбржХрзЗ password_hash() ржжрж┐рзЯрзЗ рж╕рж┐ржХрж┐ржЙрж░ рж╣рзНржпрж╛рж╢ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ ржпрж╛рждрзЗ ржбрзЗржЯрж╛ржмрзЗржЬрзЗ рж╕рж░рж╛рж╕рж░рж┐ ржкрж╛рж╕ржУрзЯрж╛рж░рзНржб ржирж╛ ржерж╛ржХрзЗред

php
Copy code
            $stmt = $conn->prepare("INSERT INTO users (email, username, password) VALUES (:email, :username, :password)");
ЁЯФ╣ $conn->prepare() ржжрж┐рзЯрзЗ SQL ржЗржиржЬрзЗржХрж╢ржи ржкрзНрж░рждрж┐рж░рзЛржз ржХрж░рж╛рж░ ржЬржирзНржп prepared statement рждрзИрж░рж┐ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗред

php
Copy code
            $stmt->execute([
                ':email' => $email,
                ':username' => $username,
                ':password' => $password_hashed,
            ]);
ЁЯФ╣ ржПржЗ рж▓рж╛ржЗржирзЗ execute() ржлрж╛ржВрж╢ржи ржжрж┐рзЯрзЗ ржбрзЗржЯрж╛ ржЗржирж╕рж╛рж░рзНржЯ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗред
ЁЯФ╕ :email, :username ржПржЧрзБрж▓рзЛ placeholder ржпрзЗржЧрзБрж▓рзЛ execute() ржжрж┐рзЯрзЗ ржнрзНржпрж╛рж▓рзБ ржкрж╛рзЯред

php
Copy code
            header("Location: login.php");
            exit;
ЁЯФ╣ ржЗржирж╕рж╛рж░рзНржЯ рж╕ржлрж▓ рж╣рж▓рзЗ ржЗржЙржЬрж╛рж░ржХрзЗ login.php рждрзЗ рж░рж┐ржбрж╛ржЗрж░рзЗржХрзНржЯ ржХрж░рзЗред
ЁЯФ╕ exit; ржжрж┐рзЯрзЗ redirect-ржПрж░ ржкрж░рзЗ ржмрж╛ржХрж┐ ржХрзЛржб ржЪрж╛рж▓рж╛ржирзЛ ржмржирзНржз ржХрж░рж╛ рж╣рзЯред

php
Copy code
        } catch (PDOException $e) {
            $error = "Something went wrong: " . $e->getMessage();
ЁЯФ╣ ржпржжрж┐ ржХрзЛржирзЛ ржбрзЗржЯрж╛ржмрзЗржЬ error рж╣рзЯ, рждрж╛рж╣рж▓рзЗ рж╕рзЗржЯрж╛ catch ржмрзНрж▓ржХрзЗ ржзрж░рж╛ рж╣рзЯ ржПржмржВ $error ржнрзНржпрж╛рж░рж┐рзЯрзЗржмрж▓-ржП ржорзЗрж╕рзЗржЬ ржжрзЗржУрзЯрж╛ рж╣рзЯред

тЬЕ рж╕рж╛рж░рж╛ржВрж╢ (Summary)
ржЕржВрж╢	ржЙржжрзНржжрзЗрж╢рзНржп
require	ржЕржирзНржп ржлрж╛ржЗрж▓ рж▓рзЛржб ржХрж░рж╛рж░ ржЬржирзНржп
$_POST	ржлрж░рзНржо ржбрзЗржЯрж╛ ржкрж╛ржУрзЯрж╛рж░ ржЬржирзНржп
trim()	ржЗржиржкрзБржЯ ржкрж░рж┐рж╖рзНржХрж╛рж░ ржХрж░рж╛рж░ ржЬржирзНржп
filter_var()	ржЗржорзЗржЗрж▓ ржпрж╛ржЪрж╛ржЗ ржХрж░рж╛рж░ ржЬржирзНржп
password_hash()	ржкрж╛рж╕ржУрзЯрж╛рж░рзНржб рж╕рж┐ржХрж┐ржЙрж░ ржХрж░рж╛рж░ ржЬржирзНржп
PDO prepare/execute	SQL ржЗржиржЬрзЗржХрж╢ржи ржкрзНрж░рждрж┐рж░рзЛржзрзЗ рж╕рж┐ржХрж┐ржЙрж░ ржбрзЗржЯрж╛ ржЗржирж╕рж╛рж░рзНржЯ
header("Location:")	рж╕ржлрж▓ рж╣рж▓рзЗ redirect