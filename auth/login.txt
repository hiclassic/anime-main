ЁЯФР Final Fixed login.php тАФ Line-by-Line Explanation in Bengali
php
Copy code
<?php
<?php: PHP ржХрзЛржб рж╢рзБрж░рзБ ржХрж░рж╛рж░ ржЬржирзНржп ржПржЯрж╛ рж╣рж▓рзЛ ржУржкрзЗржирж┐ржВ ржЯрзНржпрж╛ржЧред

php
Copy code
session_start(); // SESSION must be started first
session_start();
ЁЯСЙ ржПржЯрж┐ ржПржХржЯрж┐ PHP ржмрж┐рж▓рзНржЯ-ржЗржи ржлрж╛ржВрж╢ржиред
ЁЯФ╣ session рж╢рзБрж░рзБ ржХрж░рж╛рж░ ржЬржирзНржп ржПржЯрж┐ ржмрж╛ржзрзНржпрждрж╛ржорзВрж▓ржХред
ЁЯФ╣ ржПржЯрж┐ ржмрзНрж░рж╛ржЙржЬрж╛рж░ ржУ рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ ржоржзрзНржпрзЗ ржЗржЙржЬрж╛рж░рзЗрж░ рждржерзНржп (ржпрзЗржоржи username, user_id) рж╕ржВрж░ржХрзНрж╖ржгрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рзЗред

php
Copy code
require __DIR__ . "/../includes/header.php";
require: ржлрж╛ржЗрж▓ ржЗржоржкрзЛрж░рзНржЯ ржХрж░рзЗ ржПржмржВ ржпржжрж┐ ржлрж╛ржЗрж▓ ржирж╛ ржкрж╛ржУрзЯрж╛ ржпрж╛рзЯ рждрж╛рж╣рж▓рзЗ рж╕рзНржХрзНрж░рж┐ржкрзНржЯ рж╕рзНржЯржк ржХрж░рзЗред

__DIR__: ржмрж░рзНрждржорж╛ржи ржлрж╛ржЗрж▓рзЗрж░ ржбрж┐рж░рзЗржХрзНржЯрж░рж┐ (ржлрзЛрж▓рзНржбрж╛рж░) рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рзЗред

/../includes/header.php: ржЙржкрж░рзЗрж░ ржбрж┐рж░рзЗржХрзНржЯрж░рж┐рждрзЗ ржЧрж┐рзЯрзЗ includes ржлрзЛрж▓рзНржбрж╛рж░рзЗ ржерж╛ржХрж╛ header.php ржлрж╛ржЗрж▓ рж▓рзЛржб ржХрж░рзЗред

php
Copy code
require __DIR__ . "/../config/config.php";
ржЙржкрж░рзЗрж░ ржорждрзЛржЗ, ржПржЗ рж▓рж╛ржЗржирзЗ ржЖржорж░рж╛ config.php рж▓рзЛржб ржХрж░рж┐ ржпрж╛рждрзЗ $conn (PDO ржбрж╛ржЯрж╛ржмрзЗржЬ ржХрж╛ржирзЗржХрж╢ржи) ржкрж╛ржУрзЯрж╛ ржпрж╛рзЯред

php
Copy code
if (!defined('APPURL')) {
    define('APPURL', 'http://localhost/anime-main');
}
defined('APPURL'): ржЪрзЗржХ ржХрж░рзЗ APPURL ржирж╛ржорзЗ ржХржирж╕рзНржЯрзНржпрж╛ржирзНржЯ ржЖржЧрзЗ ржерзЗржХрзЗ ржбрж┐ржлрж╛ржЗржи ржХрж░рж╛ ржЖржЫрзЗ ржХрж┐ржирж╛ред

define('APPURL', 'http://localhost/anime-main');
ЁЯСЙ ржпржжрж┐ ржирж╛ ржерж╛ржХрзЗ, рждрж╛рж╣рж▓рзЗ APPURL ржирж╛ржорзЗ ржПржХржЯрж╛ ржХржирж╕рзНржЯрзНржпрж╛ржирзНржЯ рждрзИрж░рж┐ ржХрж░рзЗ ржпрж╛рж░ ржорж╛ржи http://localhost/anime-mainред
ЁЯФ╣ ржПржЯрж╛ ржкрж░ржмрж░рзНрждрзА URL рж░рж┐ржбрж╛ржЗрж░рзЗржХрж╢ржи ржмрж╛ рж▓рж┐ржЩрзНржХрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣ржмрзЗред

php
Copy code
$error = "";
$error: ржПржХржЯрж┐ ржнрзНржпрж╛рж░рж┐рзЯрзЗржмрж▓ ржпрж╛ ржлрж░рзНржорзЗ ржнрзБрж▓ ржерж╛ржХрж▓рзЗ ржПрж░ ржоржзрзНржпрзЗ error message рж░рж╛ржЦрж╛ рж╣ржмрзЗред
(ржкрзНрж░ржержорзЗ ржлрж╛ржБржХрж╛ ржХрж░рзЗ рж░рж╛ржЦрж╛ рж╣рж▓рзЛ)

php
Copy code
if ($_SERVER['REQUEST_METHOD'] === 'POST' && isset($_POST['submit'])) {
$_SERVER['REQUEST_METHOD']: рж╕рж╛рж░рзНржнрж╛рж░ ржерзЗржХрзЗ ржЖрж╕рж╛ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржорзЗржержб (ржпрзЗржоржи: POST, GET)ред

=== 'POST': ржЪрзЗржХ ржХрж░ржЫрзЗ ржЗржЙржЬрж╛рж░ ржлрж░рзНржо рж╕рж╛ржмржорж┐ржЯ ржХрж░рзЗржЫрзЗ ржХрж┐ржирж╛ POST ржкржжрзНржзрждрж┐рждрзЗред

isset($_POST['submit']): ржЪрзЗржХ ржХрж░рзЗ submit ржирж╛ржорзЗ ржХрзЛржи ржЗржиржкрзБржЯ ржкрж╛ржарж╛ржирзЛ рж╣рзЯрзЗржЫрзЗ ржХрж┐ржирж╛ред

php
Copy code
$email = trim($_POST['email'] ?? '');
$password = $_POST['password'] ?? '';
$email = trim(...): ржЗржЙржЬрж╛рж░рзЗрж░ ржкрж╛ржарж╛ржирзЛ email ржЗржиржкрзБржЯ ржирж┐рзЯрзЗ рждрж╛рж░ рж╕рж╛ржоржирзЗ-ржкрж┐ржЫржирзЗрж░ ржлрж╛ржБржХрж╛ рж╕рзНржкрзЗрж╕ ржорзБржЫрзЗ ржлрзЗрж▓рзЗред

$_POST['email'] ?? '': ржпржжрж┐ email рж╕рзЗржЯ ржХрж░рж╛ ржирж╛ ржерж╛ржХрзЗ, рждржмрзЗ ржЦрж╛рж▓рж┐ string ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗред

$password = ...: ржПржХржЗржнрж╛ржмрзЗ password ржЗржиржкрзБржЯ ржирзЗржЗред

php
Copy code
if (empty($email) || empty($password)) {
    $error = "Please fill in all fields.";
}
empty(...): ржЪрзЗржХ ржХрж░рзЗ ржЗржиржкрзБржЯ ржлрж╛ржБржХрж╛ ржХрж┐ржирж╛ред

ржпржжрж┐ email ржмрж╛ password ржлрж╛ржБржХрж╛ рж╣рзЯ, рждрж╛рж╣рж▓рзЗ $error-ржП ржорзЗрж╕рзЗржЬ рж╕рзЗржЯ ржХрж░рзЗред

php
Copy code
else {
    try {
        $stmt = $conn->prepare("SELECT * FROM users WHERE email = :email");
try: Error (exception) ржзрж░рж╛рж░ ржЬржирзНржп try-catch ржмрзНрж▓ржХред

$conn->prepare(...): PDO ржжрж┐рзЯрзЗ SQL query рждрзИрж░рж┐рж░ ржЬржирзНржп ржмрзНржпржмрж╣рж╛рж░ рж╣рзЯред

:email: ржПржЯрж╛ ржПржХржЯрж┐ ржирж╛ржоржпрзБржХрзНржд parameter (placeholder), SQL injection ржерзЗржХрзЗ рж░ржХрзНрж╖рж╛ ржХрж░рзЗред

php
Copy code
$stmt->execute([':email' => $email]);
execute(...): query рж░рж╛ржирзЗ $email ржорж╛ржиржЯрж┐ bind ржХрж░рзЗ :email placeholder-ржПред

php
Copy code
$user = $stmt->fetch(PDO::FETCH_ASSOC);
fetch(PDO::FETCH_ASSOC): рж░рж┐ржЯрж╛рж░рзНржи рж╣ржУрзЯрж╛ row-ржХрзЗ associative array рж╣рж┐рж╕рзЗржмрзЗ ржирзЗрзЯ (ржпрзЗржЦрж╛ржирзЗ key рж╣рж▓рзЛ column name)ред

php
Copy code
if ($user && password_verify($password, $user['password'])) {
$user: ржпржжрж┐ user ржорзЗрж▓рзЗ (null ржирж╛ рж╣рзЯ)ред

password_verify(...): ржЗржЙржЬрж╛рж░рзЗрж░ ржЗржиржкрзБржЯ ржХрж░рж╛ password ржПржмржВ ржбрж╛ржЯрж╛ржмрзЗржЬрзЗрж░ hashed password рждрзБрж▓ржирж╛ ржХрж░рзЗ ржорж┐рж▓рж┐рзЯрзЗ ржжрзЗржЦрзЗред

php
Copy code
$_SESSION['user_id'] = $user['id'];
$_SESSION['username'] = $user['username'];
$_SESSION['email'] = $user['email'];
ржпржжрж┐ password ржорж┐рж▓рзЗ, рждржЦржи user-ржПрж░ рждржерзНржп $_SESSION ржП рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рзЗред

ржПржЧрзБрж▓рзЛ ржкрж░рзЗ ржЕржирзНржп ржкрзЗржЬрзЗ ржЗржЙржЬрж╛рж░рзЗрж░ identity ржмрзЛржЭрж╛рждрзЗ ржХрж╛ржЬрзЗ рж▓рж╛ржЧрзЗ (ржпрзЗржоржи: dashboard, profile)ред

php
Copy code
header("Location: " . APPURL . "/index.php");
exit;
header(...): ржЗржЙржЬрж╛рж░ржХрзЗ redirect ржХрж░рзЗ /index.php ржкрзЗржЬрзЗред

exit: рж░рж┐ржбрж╛ржЗрж░рзЗржХрж╢ржирзЗрж░ ржкрж░ ржХрзЛржб execution ржмржирзНржз ржХрж░рзЗ ржжрзЗрзЯред

php
Copy code
} else {
    $error = "Incorrect email or password.";
}
ржпржжрж┐ $user ржирж╛ ржерж╛ржХрзЗ ржмрж╛ password ржирж╛ ржорзЗрж▓рзЗ, рждрж╛рж╣рж▓рзЗ error message ржжрзЗржЦрж╛рзЯред

php
Copy code
} catch (PDOException $e) {
    $error = "Database error: " . $e->getMessage();
}
ржпржжрж┐ ржбрж╛ржЯрж╛ржмрзЗржЬрзЗ ржХрзЛржирзЛ рж╕ржорж╕рзНржпрж╛ рж╣рзЯ (ржпрзЗржоржи connection error), рждрж╛рж╣рж▓рзЗ рждрж╛ ржзрж░рзЗ $error-ржП message ржжрзЗржЦрж╛рзЯред

php
Copy code
?>
PHP ржХрзЛржб рж╢рзЗрж╖ред

тЬЕ HTML Part (рж╕рж╛рж░рж╛ржВрж╢рзЗ)
Breadcrumb:
php
Copy code
<section class="normal-breadcrumb set-bg" ...>
ржмрзНржпрж╛ржХржЧрзНрж░рж╛ржЙржирзНржб ржЗржорзЗржЬ рж╕рж╣ welcome breadcrumb рж╕рзЗржХрж╢ржиред

Login Form:
php
Copy code
<form action="" method="POST">
ржлрж░рзНржо рж╕рж╛ржмржорж┐рж╢ржирзЗрж░ рж╕ржорзЯ, ржПржЗ ржкрзЗржЬрзЗ POST рж╣ржмрзЗред

php
Copy code
<input name="email" ...>
<input name="password" ...>
ржЗржЙржЬрж╛рж░ ржЗржиржкрзБржЯ ржирж┐ржЪрзНржЫрзЗред

php
Copy code
<button name="submit" ...>Login Now</button>
рж╕рж╛ржмржорж┐ржЯ ржмрж╛ржЯржиред

Error Message:
php
Copy code
<?php if (!empty($error)): ?>
    <div><?= htmlspecialchars($error); ?></div>
<?php endif; ?>
ржпржжрж┐ $error ржерж╛ржХрзЗ, рждрж╛рж╣рж▓рзЗ рждрж╛ рж╕рзЗржлржнрж╛ржмрзЗ (HTML injection ржЫрж╛рзЬрж╛ржЗ) ржжрзЗржЦрж╛рзЯред

тЬЕ Bonus (Session ржЪрзЗржХ ржХрж░рзЗ ржЗржЙржЬрж╛рж░ show ржХрж░рж╛рж░ ржХрзЛржб):
php
Copy code
<?php if (isset($_SESSION['username'])): ?>
    <p>Welcome, <?= htmlspecialchars($_SESSION['username']) ?>!</p>
<?php endif; ?>
ЁЯФБ Summary:
ржПржЗ ржлрж╛ржЗрж▓ржЯрж┐ ржПржХржжржо complete login system рждрзИрж░рж┐ ржХрж░рзЗ ржпрзЗржЦрж╛ржирзЗ:

Validation ржЖржЫрзЗ

Hash password verify рж╣ржЪрзНржЫрзЗ

Session ржП ржбрж╛ржЯрж╛ рж╕ржВрж░ржХрзНрж╖ржг рж╣ржЪрзНржЫрзЗ

рж░рж┐ржбрж╛ржЗрж░рзЗржХрж╢ржи рж╣ржЪрзНржЫрзЗ

ржПржмржВ error message ржЗржЙржЬрж╛рж░ржХрзЗ ржжрзЗржЦрж╛ржирзЛ рж╣ржЪрзНржЫрзЗ

